<!-- Menú lateral izquierdo (navegación principal) -->
<ion-menu [swipeGesture]="false" side="start" menuId="side-menu" contentId="main-content">

<div class="main-container" data-theme="halloween">



  <ion-header class="ion-no-border">
    <ion-toolbar color="light">
      <!-- Información del usuario autenticado -->
      @if (isAuthenticated) {
        <ion-item lines="none" class="user-info" style="--background: transparent;">
          <ion-avatar slot="start">
            @if (photoURL) {
              <img [alt]="displayName || displayEmail" [src]="photoURL" />
            } @else {
              <ion-label>
                <span class="initials">{{ getInitials() }}</span>
              </ion-label>
            }
          </ion-avatar>
          <ion-label>
            <h3 class="user-name" class="ion-no-margin">
              {{ displayName || ('APP.user.user' | transloco) }}
            </h3>
            <p class="user-email" class="ion-no-margin">
              {{ displayEmail }}
            </p>
          </ion-label>
        </ion-item>
      }

      <!-- Usuario no autenticado -->
      @if (!isAuthenticated) {
        <div class="flex justify-center w-full">
          <ion-menu-toggle>
            <button
              class="btn btn-wide btn-outline btn-primary"
              type="button"
              (click)="openLoginModal()"
            >
              Ingresar / Registrarse
            </button>
          </ion-menu-toggle>
        </div>
      }
    </ion-toolbar>
  </ion-header>

  <ion-content>


    <!-- Opciones del menú -->
    <ion-list>
      @for (option of menuOptions; track option.title) {
        <ion-item 
          button 
          (click)="navigateTo(option.route)"
          [disabled]="!option.enabled"
          class="menu-item">
          <ion-icon 
            [name]="option.icon" 
            slot="start" 
            class="menu-icon">
          </ion-icon>
          <ion-label class="menu-label">{{ option.title }}</ion-label>
        </ion-item>
      }
    </ion-list>

    <!-- Opción de cerrar sesión (solo si está autenticado) -->
    @if (isAuthenticated) {
      <ion-list>
        <ion-item button (click)="logout()" class="menu-item logout-item">
          <!-- <ion-icon name="log-out-outline" slot="start" class="menu-icon logout-icon"></ion-icon> -->
          <ion-label class="menu-label logout-label">{{ 'APP.menu.logout' | transloco }}</ion-label>
        </ion-item>
      </ion-list>
    }

    <!-- Información de versión -->
    <div class="version-info">
      <p class="version-text">Versión {{ version }}</p>
    </div>
  </ion-content>

</div>
</ion-menu>

<!-- Menú lateral derecho (notificaciones) -->
<ion-menu [swipeGesture]="false" side="end" menuId="notifications-menu" contentId="main-content">
  <ion-header>
    <ion-toolbar color="secondary">
      <ion-title>Notifications</ion-title>
      <ion-buttons slot="end">
        <ion-button (click)="closeNotificationsMenu()">
          <!-- <ion-icon name="close"></ion-icon> -->
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <!-- Lista de notificaciones -->
    <ion-list>
      @for (notification of notifications; track notification.id) {
        <ion-item class="notification-item">
          <ion-icon [name]="notification.icon" slot="start" [color]="notification.color"></ion-icon>
          <ion-label>
            <h3>{{ notification.title }}</h3>
            <p>{{ notification.message }}</p>
            <p class="notification-time">{{ notification.time }}</p>
          </ion-label>
          <ion-button fill="clear" slot="end" (click)="markAsRead(notification.id)">
            <!-- <ion-icon name="checkmark-circle-outline"></ion-icon> -->
          </ion-button>
        </ion-item>
      }
    </ion-list>

    <!-- Estado vacío -->
    @if (notifications.length === 0) {
      <div class="empty-state">
        <!-- <ion-icon name="notifications-off-outline" class="empty-icon"></ion-icon> -->
        <h3>No notifications</h3>
        <p>We'll notify you when you have new activities</p>
      </div>
    }

    <!-- Botón para marcar todas como leídas -->
    @if (notifications.length > 0) {
      <div class="notifications-actions">
        <ion-button expand="block" fill="outline" (click)="markAllAsRead()">
          <!-- <ion-icon name="checkmark-done-outline" slot="start"></ion-icon> -->
          Mark all as read
        </ion-button>
      </div>
    }
  </ion-content>
</ion-menu>

<!-- Contenido principal -->
<ion-router-outlet id="main-content"></ion-router-outlet>
